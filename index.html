
<!doctype html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"
    />
  <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
  <title>小程序跳转测试</title>
  <style type="text/css">
    .wrapper {
      width: 200px;
      height: 200px;
      line-height: 200px;
      margin: 0 auto;
      margin-top: 100px;
      background: rgba(0,0,0,0.5);
      color: #fff;
      text-align: center;
    }
  </style>
</head>

<body>
  <div id="wrapper" class="wrapper">跳转</div>
  <a href="https://www.baidu.com">百度</a>
  <script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.3.2.js"></script>
  <script>
    alert('hehe0');
    window.onload = function() {
        document.documentElement.querySelector('#wrapper').addEventListener('click', function() {
            console.log('will jump');
            wx.miniProgram.navigateTo({url: '/pages/jump/index?url=https://daojia.jd.com/html/index.html?channel=jdapp'});
        })
      function onBridgeReady() {
        WeixinJSBridge.call('hideOptionMenu');
      }
      document.addEventListener('WeixinJSBridgeReady', onBridgeReady);
      var isPageHide = false;
      window.addEventListener('pageshow', function () {
        alert('pageshow');
        if (isPageHide) {
          document.addEventListener('WeixinJSBridgeReady', onBridgeReady);
          window.location.reload();
         }
       });
      window.addEventListener('pagehide', function () {
        alert('pagehide');
        isPageHide = true;
      });
      alert('hehe2');
    };
  </script>
</html>
